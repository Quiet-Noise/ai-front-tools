# N8n Chat Embed

A highly configurable React component for embedding n8n chat functionality with support for multiple media uploads, similar to ChatGPT's interface.

## Features

- ðŸŽ¨ **Fully Configurable** - Customize colors, themes, positioning, and behavior
- ðŸ“Ž **Multi-Media Upload** - Support for images, videos, audio, and documents
- ðŸŒ™ **Dark/Light Themes** - Built-in theme support with custom color options
- ðŸ“± **Responsive Design** - Works on desktop and mobile devices
- ðŸ”Œ **Easy Integration** - Use as React component or via CDN
- âš¡ **TypeScript Support** - Full type safety and IntelliSense
- ðŸŽ¯ **N8n Compatible** - Direct integration with n8n webhooks

## Installation

### As NPM Package

```bash
npm install @ai-front-tools/n8n-chat-embed
```

### Via CDN

```html
<script src="https://your-cdn.com/n8n-chat-embed.umd.js"></script>
```

## Usage

### React Component

```tsx
import { ChatEmbed, ChatConfig } from '@ai-front-tools/n8n-chat-embed'

const config: ChatConfig = {
  n8nWebhookUrl: 'https://your-n8n-instance.com/webhook/chat',
  title: 'AI Assistant',
  subtitle: 'How can I help you today?',
  theme: 'light',
  enableFileUpload: true,
  maxFiles: 5,
  position: 'bottom-right'
}

function App() {
  return (
    <ChatEmbed 
      config={config}
      onMessage={(message) => console.log('New message:', message)}
      onError={(error) => console.error('Chat error:', error)}
    />
  )
}
```

### CDN Usage

#### Auto-initialization

```html
<script 
  src="https://your-cdn.com/n8n-chat-embed.umd.js"
  data-webhook-url="https://your-n8n-instance.com/webhook/chat"
  data-auto-init="true"
  data-title="AI Assistant"
  data-theme="light"
  data-position="bottom-right"
></script>
```

#### Manual initialization

```html
<div id="chat-container"></div>
<script src="https://your-cdn.com/n8n-chat-embed.umd.js"></script>
<script>
  N8nChatEmbed.init('chat-container', {
    n8nWebhookUrl: 'https://your-n8n-instance.com/webhook/chat',
    title: 'AI Assistant',
    theme: 'dark',
    enableFileUpload: true
  })
</script>
```

## Configuration Options

```typescript
interface ChatConfig {
  n8nWebhookUrl: string              // Required: Your n8n webhook URL
  title?: string                     // Chat widget title
  subtitle?: string                  // Chat widget subtitle
  placeholder?: string               // Input placeholder text
  theme?: 'light' | 'dark' | 'auto' // Theme selection
  colors?: {                         // Custom color scheme
    primary?: string
    background?: string
    userBubble?: string
    botBubble?: string
    text?: string
  }
  maxFileSize?: number              // Max file size in bytes (default: 10MB)
  allowedFileTypes?: string[]       // Allowed MIME types
  showTypingIndicator?: boolean     // Show typing animation
  showTimestamps?: boolean          // Show message timestamps
  enableFileUpload?: boolean        // Enable file uploads
  maxFiles?: number                 // Max files per message
  position?: 'bottom-right' | 'bottom-left' | 'inline'
  width?: number                    // Widget width in pixels
  height?: number                   // Widget height in pixels
  zIndex?: number                   // CSS z-index
}
```

## File Upload Support

The component supports multiple file types:

- **Images**: JPG, PNG, GIF, WebP, SVG
- **Videos**: MP4, WebM, MOV, AVI
- **Audio**: MP3, WAV, OGG, M4A
- **Documents**: PDF, DOC, DOCX, TXT

Files are automatically validated for size and type, with preview generation for images and videos.

## N8n Webhook Setup

Your n8n workflow should accept POST requests with:

- `message`: The text message
- `file_0`, `file_1`, etc.: Uploaded files (if any)

Example n8n workflow response:

```json
{
  "response": "Thank you for your message! I've received your files."
}
```

## Styling

The component includes comprehensive CSS with CSS custom properties for easy theming:

```css
.chat-embed {
  --chat-primary: #007bff;
  --chat-background: #ffffff;
  --chat-user-bubble: #007bff;
  --chat-bot-bubble: #f1f3f4;
  --chat-text: #333333;
}
```

## Events

```typescript
// Message sent/received
onMessage?: (message: ChatMessage) => void

// Error handling
onError?: (error: Error) => void

// File upload
onFileUpload?: (files: MediaFile[]) => void
```

## Development

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build library
npm run build

# Build CDN version
npm run build:cdn

# Lint code
npm run lint
```

## License

MIT